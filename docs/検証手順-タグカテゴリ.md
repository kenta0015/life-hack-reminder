# タグ・カテゴリ 検証手順

実装したタグ機能が意図どおり動くか、次の手順で確認する。

---

## 前提

- **Web**: ブラウザで `npm start` または `npx expo start` して開く。
- **実機 iPhone**: `npm run start:tunnel` で起動し、Safari に表示された `exp://...` URL を開いて Expo Go で起動。

---

## 1. 新規追加でタグを付ける

1. 一覧で **「追加」**（＋ボタン）をタップ。
2. タイプ（Life Card / Nudge / Playbook）を選び、必須項目を入力。
3. **「タグ（任意）」** に `仕事, モチベ` のようにカンマ区切りで入力。
4. 保存（✓）する。
5. **確認**: 一覧に戻り、そのカードに **「仕事」「モチベ」** のチップが表示されていること。
6. 画面上部に **「すべて」「仕事」「モチベ」** のフィルタチップが出ていること。

---

## 2. タグでフィルタする

1. 上記でタグを付けたアイテムが1件以上ある状態にする。
2. フィルタで **「仕事」** をタップする。
3. **確認**: 「仕事」が付いたアイテムだけ表示されること。
4. **「モチベ」** をタップすると、「モチベ」が付いたアイテムだけ表示されること。
5. **「すべて」** をタップすると、全アイテムが表示されること。
6. 存在しないタグでフィルタしたときは起きないのでスキップでよい。

---

## 3. 編集でタグを変える

1. 一覧で任意のアイテムをタップして **編集画面** を開く。
2. **「タグ（任意）」** の内容を変える（例: `仕事, モチベ` → `人間関係` だけにする）。
3. 保存する。
4. **確認**: 一覧でそのカードのタグが変更後の内容になっていること。フィルタ「人間関係」でそのアイテムだけ出ること。

---

## 4. タグなしのアイテム（既存データ）

1. もともとタグを付けていないアイテムは、一覧で **タグチップが表示されない** こと。
2. 編集画面でタグ欄は **空** であること。
3. タグを何か入れて保存すると、以降はそのタグが表示・フィルタ対象になること。

---

## 5. 配信・削除ボックスとの整合

- **配信シミュレート** → ドーン画面 → YES/NO/SKIP: これまでどおり動くこと（タグは配信ロジックに使っていない）。
- **削除ボックス** に移したアイテムを **復活** すると、付けてあったタグもそのまま復活していること。
- **10個目で置き換え** して追加するときも、タグを入力して保存すれば新規アイテムにタグが付いていること。

---

## チェックリスト（検証時メモ用）

| # | 項目 | 結果 |
|---|------|------|
| 1 | 新規追加でタグ入力・保存 → 一覧にタグ表示 | ☐ |
| 2 | フィルタ「すべて」「タグA」「タグB」で表示が切り替わる | ☐ |
| 3 | 編集でタグ変更 → 一覧・フィルタに反映 | ☐ |
| 4 | タグなしアイテムはチップ非表示、編集でタグ追加可能 | ☐ |
| 5 | 配信シミュレート・削除ボックス・復活・置き換えで不具合なし | ☐ |

---

## 問題が出たとき

- **タグが保存されない**: 追加・編集画面で「タグ（任意）」にカンマ区切りで入力し、保存（✓）を押しているか確認。
- **フィルタで0件になる**: そのタグが付いたアイテムが1件以上あるか、一覧でタグチップを確認。
- **既存アイテムが消えた**: タグフィルタがかかっていないか。「すべて」を選ぶと全件出る。
